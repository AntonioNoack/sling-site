<!DOCTYPE html><html lang="en">
<head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
        <title>Apache Sling :: Managing permissions (jackrabbit.accessmanager)</title>
        <link rel="icon" href="/res/favicon.ico"/>
        <link rel="stylesheet" href="/res/css/site.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'></script><script>
            hljs.initHighlightingOnLoad();
        </script>
        
    </head>    <body>
<div class="title">
            <div class="logo">
                <a href="http://sling.apache.org">
                    <img border="0" alt="Apache Sling" src="/res/logos/sling.svg"/>
                </a>
            </div><div class="header">
                <a href="http://www.apache.org">
                    <img border="0" alt="Apache" src="/res/logos/apache.png"/>
                </a>
            </div>
        </div><nav class="menu">
            <ul>
                <li>
                    <strong>Documentation</strong><ul>
                        <li><a href="/documentation.html">Main</a></li><li><a href="/documentation/getting-started.html">Getting Started</a></li><li><a href="/documentation/the-sling-engine.html">The Sling Engine</a></li><li><a href="/documentation/development.html">Development</a></li><li><a href="/documentation/bundles.html">Bundles</a></li><li><a href="/documentation/tutorials-how-tos.html">Tutorials &amp; How-Tos</a></li><li><a href="http://sling.apache.org/components/">Maven Plugins</a></li><li><a href="/documentation/configuration.html">Configuration</a></li>
                    </ul>
                </li><li>
                    <strong>API Docs</strong><ul>
                        <li><a href="/apidocs/sling11/index.html">Sling 11</a></li><li><a href="/apidocs/sling10/index.html">Sling 10</a></li><li><a href="/apidocs/sling9/index.html">Sling 9</a></li><li><a href="/documentation/apidocs.html">All versions</a></li>
                    </ul>
                </li><li>
                    <strong>Support</strong><ul>
                        <li><a href="http://s.apache.org/sling.wiki">Wiki</a></li><li><a href="http://s.apache.org/sling.faq">FAQ</a></li><li><a href="/sitemap.html">Site Map</a></li>
                    </ul>
                </li><li>
                    <strong>Project Info</strong><ul>
                        <li><a href="/downloads.cgi">Downloads</a></li><li><a href="http://www.apache.org/licenses/">License</a></li><li><a href="/news.html">News</a></li><li><a href="/releases.html">Releases</a></li><li><a href="https://issues.apache.org/jira/browse/SLING">Issue Tracker</a></li><li><a href="/links.html">Links</a></li><li><a href="/contributing.html">Contributing</a></li><li><a href="/project-information.html">Project Information</a></li><li><a href="/project-information/security.html">Security</a></li>
                    </ul>
                </li><li>
                    <strong>Source</strong><ul>
                        <li><a href="https://github.com/apache/?utf8=%E2%9C%93&q=sling">GitHub</a></li><li><a href="https://gitbox.apache.org/repos/asf?s=sling">Git at Apache</a></li>
                    </ul>
                </li><li>
                    <strong>Apache Software Foundation</strong><ul>
                        <li><a href="http://www.apache.org/foundation/thanks.html">Thanks!</a></li><li><a href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a></li><li><a href="http://www.apache.org/foundation/buy_stuff.html">Buy Stuff</a></li><li><a href="https://www.apache.org/events/current-event.html">
                                <img border="0" alt="Current ASF Events" src="https://www.apache.org/events/current-event-125x125.png" width="125"/>
                            </a></li><li><a href="http://apache.org/foundation/contributing.html">
                                <img border="0" alt="Support the Apache Software Foundation!" src="/res/images/SupportApache-small.png" width="125"/>
                            </a></li>
                    </ul>
                </li>
            </ul>
        </nav>        <div class="main">
            <div class="pagenav">
<div class="breadcrumbs">
                    <a href="/">
                        Home
                    </a>&nbsp;&raquo;&nbsp;<a href="/documentation.html">
                        Documentation
                    </a>&nbsp;&raquo;&nbsp;<a href="/documentation/bundles.html">
                        Bundles
                    </a>&nbsp;&raquo;&nbsp;
                </div>                
<div class="tags">
                    <a href="/tags/security.html" class="label">
                        security
                    </a> 
                </div>                
                
            </div><h1 class="pagetitle">
                Managing permissions (jackrabbit.accessmanager)
            </h1><div id="generatedToC"></div><script src='/res/jquery-3.2.1.min.js' type='text/javascript'></script><script src='/res/tocjs-1-1-2.js' type='text/javascript'></script><script type='text/javascript'>$(document).ready(function() { $('#generatedToC').toc({'selector':'h1[class!=pagetitle],h2,h3'}); } );</script>
<div class="row"><div class="small-12 columns"><section class="wrap"><p>The <code>jackrabbit-accessmanager</code> bundle delivers a REST interface to manipulate users permissions in the JCR. After installing the <code>jackrabbit-accessmanager</code> bundle the REST services are exposed under the path of the node where you will manipulate the permissions for a user with a specific selector like <code>modifyAce</code>, <code>acl</code>, <code>eacl</code> and <code>deleteAce</code>. <!-- TODO reactivate TOC once JBake moves to flexmark-java -->
</p>
<h2><a href="#privileges" name="privileges">Privileges</a></h2>
<table>
  <thead>
    <tr>
      <th>Name </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>jcr:read </td>
      <td>the privilege to retrieve a node and get its properties and their values </td>
    </tr>
    <tr>
      <td>jcr:readAccessControl </td>
      <td>the privilege to get the access control policy of a node </td>
    </tr>
    <tr>
      <td>jcr:modifyProperties </td>
      <td>the privilege to create, modify and remove the properties of a node </td>
    </tr>
    <tr>
      <td>jcr:addChildNodes </td>
      <td>the privilege to create child nodes of a node </td>
    </tr>
    <tr>
      <td>jcr:removeChildNodes </td>
      <td>the privilege to remove child nodes of a node </td>
    </tr>
    <tr>
      <td>jcr:removeNode </td>
      <td>the privilege to remove a node </td>
    </tr>
    <tr>
      <td>jcr:write </td>
      <td>an aggregate privilege that contains: jcr:modifyProperties jcr:addChildNodes jcr:removeNode jcr:removeChildNodes </td>
    </tr>
    <tr>
      <td>jcr:modifyAccessControl </td>
      <td>the privilege to modify the access control policies of a node </td>
    </tr>
    <tr>
      <td>jcr:lockManagement </td>
      <td>the privilege to lock and unlock a node </td>
    </tr>
    <tr>
      <td>jcr:versionManagement </td>
      <td>the privilege to perform versioning operations on a node </td>
    </tr>
    <tr>
      <td>jcr:nodeTypeManagement </td>
      <td>the privilege to add and remove mixin node types and change the primary node type of a node </td>
    </tr>
    <tr>
      <td>jcr:retentionManagement </td>
      <td>the privilege to perform retention management operations on a node </td>
    </tr>
    <tr>
      <td>jcr:lifecycleManagement </td>
      <td>the privilege to perform lifecycle operations on a node </td>
    </tr>
    <tr>
      <td>jcr:all </td>
      <td>an aggregate privilege that contains all predefined privileges </td>
    </tr>
  </tbody>
</table>
<h2><a href="#add-or-modify-permissions" name="add-or-modify-permissions">Add or modify permissions</a></h2>
<p>To modify the permissions for a node POST a request to <code>/&lt;path-to-the-node&gt;.modifyAce.&lt;html or json&gt;</code>. The following parameters are available:</p>
<table>
  <thead>
    <tr>
      <th>Name </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>principalId </td>
      <td>The id of the user or group to modify the access rights for </td>
    </tr>
    <tr>
      <td>order </td>
      <td>The position of the entry within the list (see below for details) </td>
    </tr>
    <tr>
      <td>privilege@[privilege_name] </td>
      <td>One param for each privilege to modify. The value must be either 'granted', 'denied' or 'none'. </td>
    </tr>
    <tr>
      <td>restriction@[restriction_name] </td>
      <td>(since 3.0.4) One param for each restriction value. The same parameter name may be used again for multi-value restrictions. The value is the target value of the restriction. </td>
    </tr>
    <tr>
      <td>restriction@[restriction_name]@Delete </td>
      <td>(since 3.0.4) One param for each restriction to delete. The parameter value is ignored and can be anything. </td>
    </tr>
  </tbody>
</table>
<p>The <code>order</code> parameter may have the following values:</p>
<table>
  <thead>
    <tr>
      <th>Value </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>first</code> </td>
      <td>Place the target entry as the first amongst its siblings </td>
    </tr>
    <tr>
      <td><code>last</code> </td>
      <td>Place the target entry as the last amongst its siblings </td>
    </tr>
    <tr>
      <td><code>before *xyz*</code> </td>
      <td>Place the target entry immediately before the sibling whose name is <em>xyz</em> </td>
    </tr>
    <tr>
      <td><code>after *xyz*</code> </td>
      <td>Place the target entry immediately after the sibling whose name is <em>xyz</em> </td>
    </tr>
    <tr>
      <td>numeric </td>
      <td>Place the target entry at the indicated numeric place amongst its siblings where <em>0</em> is equivalent to <code>first</code> and <em>1</em> means the second place </td>
    </tr>
  </tbody>
</table>
<p>Responses: | 200 | Success | | 500 | Failure, HTML (or JSON) explains failure. |</p>
<p>Example with curl:</p>
<pre><code>curl -FprincipalId=myuser -Fprivilege@jcr:read=granted http://localhost:8080/test/node.modifyAce.html
</code></pre>
<p>Single value restriction example with curl:</p>
<pre><code>curl -FprincipalId=myuser -Fprivilege@jcr:read=granted -Frestriction@rep:glob=child1 http://localhost:8080/test/node.modifyAce.html
</code></pre>
<p>Multi value restriction example with curl:</p>
<pre><code>curl -FprincipalId=myuser -Fprivilege@jcr:read=granted -Frestriction@rep:itemNames=name1 -Frestriction@rep:itemNames=name2 http://localhost:8080/test/node.modifyAce.html
</code></pre>
<p>Remove existing restriction example with curl:</p>
<pre><code>curl -FprincipalId=myuser -Frestriction@rep:glob@Delete=yes http://localhost:8080/test/node.modifyAce.html
</code></pre>
<h2><a href="#delete-permissions" name="delete-permissions">Delete permissions</a></h2>
<p>To delete permissions for a node POST a request to <code>/&lt;path-to-the-node&gt;.deleteAce.&lt;html or json&gt;</code>. The following parameters are available:</p>
<p>Responses: | 200 | Success | | 500 | Failure, HTML (or JSON) explains failure. | Example with curl:</p>
<pre><code>curl -F:applyTo=myuser http://localhost:8080/test/node.deleteAce.html
</code></pre>
<h2><a href="#get-permissions" name="get-permissions">Get permissions</a></h2>
<h3><a href="#bound-permissions" name="bound-permissions">Bound Permissions</a></h3>
<p>To get the permissions bound to a particular node in a json format for a node send a GET request to <code>/&lt;path-to-the-node&gt;.acl.json</code>. </p>
<p>Example:</p>
<pre><code>http://localhost:8080/test/node.acl.json
</code></pre>
<h3><a href="#effective-permissions" name="effective-permissions">Effective Permissions</a></h3>
<p>To get the permissions which are effective for a particular node in a json format for a node send a GET request to <code>/&lt;path-to-the-node&gt;.eacl.json</code>. </p>
<p>Example:</p>
<pre><code>http://localhost:8080/test/node.eacl.json
</code></pre>
<div class="note">
See section 16.3 of the JCR 2.0 specification for an explanation of the difference between bound and effective policies.
</div></section></div></div>            
            <div class="footer">
<div class="revisionInfo">
                    Last modified by <span class="author">Eric Norman</span> on <span class="comment">Thu Dec 20 11:13:55 2018 -0800</span>
                </div>                <p>
                    Apache Sling, Sling, Apache, the Apache feather logo, and the Apache Sling project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners.
                </p><p>
                    Copyright © 2007-2018 The Apache Software Foundation.
                </p>
            </div>
            
        </div>
    </body>
</html>